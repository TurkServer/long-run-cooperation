<template name="game">
  <div class="row marketing">
    <div class="col-lg-12">
      {{#if invited}}
      <div class="alert alert-success alert-dismissible" role="alert">
	<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	You've been automatically matched to a game.
      </div>
      {{/if}}

      {{#if opponent_offline}}
      <div class="alert alert-warning" role="alert">
	Your opponent has disconnected. You can wait for them to return, or <a class="abandon" href="#">click here</a> to abandon the game and return to the lobby.
      </div>
      {{/if}}

      {{#each results}}
      <strong>Round {{round_}}</strong>:
      You chose <span class="{{pchoice_color}}">{{pchoice}}</span> and your opponent chose <span class="{{ochoice_color}}">{{ochoice}}</span>.
      You received {{pscore}} payoff and your opponent received {{oscore}} payoff.<br/>
      {{/each}}

      {{#if playing}}
      <strong>Round {{round}}</strong>:
      {{state}} <br/>
      <button type="button" class="btn btn-success cooperate {{#if turn_over}}disabled{{/if}}">Choice 1</button>
      <button type="button" class="btn btn-danger defect {{#if turn_over}}disabled{{/if}}">Choice 2</button>
      {{else}}
      <br/><strong>Results</strong>:
      Your total payoff is {{payoffs.you}} and your opponent's total payoff is {{payoffs.opponent}}. <br/><br/>
      {{#if notDone}}
      <button type="button" class="btn btn-default return">Return to Waiting Room</button>
      {{else}}
      You have finished your 20 games.
      {{> submit}}
      {{/if}}
      {{/if}}
    </div>
  </div>
</template>
