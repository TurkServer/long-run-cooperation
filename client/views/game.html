<template name="game">
  <div class="row">
    <div class="col-lg-9">
      <h4>Game {{gameNum}} (out of {{numGames}})</h4>
        <p>Each game consists of {{numRounds}} rounds. In each round, you will select between <span class="green">Choice 1</span> and <span class="red">Choice 2</span>. The table below shows the number of points associated with each possible combination of your choice and the choice of your opponent. In each cell, the first number is the number of points you will receive, and the second number is the number of points your opponent will receive.
	  {{> payoffTable}}
	</p>

      Previous choices and outcomes:
      <table class="table table-bordered">
      	<tbody>
      	  <tr>
      	    <td><strong>Round</strong></td>
      	    <td><strong>Your Choice</strong></td>
      	    <td><strong>Opponent's Choice</strong></td>
      	    <td><strong>Your Points</strong></td>
      	    <td><strong>Opponent's Points</strong></td>
      	  </tr>
      	  {{#each results}}
      	  <tr>
      	    <td>{{round_}}</td>
      	    <td><span class="{{pcolor}}">{{pchoice}}</span></td>
      	    <td><span class="{{ocolor}}">{{ochoice}}</span></td>
      	    <td>{{pscore}}</td>
      	    <td>{{oscore}}</td>
      	  </tr>
      	  {{/each}}
      	  <tr>
      	    <td colspan="3" class="align-right"><strong>Total Points</strong></td>
      	    <td>{{payoffs.you}}</td>
      	    <td>{{payoffs.opponent}}</td>
      	  </tr>
      	</tbody>
      </table>

      {{#if gameOver}}
      <strong>Game Over.</strong><br/>
      <button type="button" class="btn btn-default endgame">Return to Lobby</button>
      {{else}}

      {{#if gameAbandoned}}
      <strong>Game Abandoned.</strong><br/>
      <button type="button" class="btn btn-default endgame">Return to Lobby</button>
      {{else}}
      
      {{#if choseAction}}
      <p>Waiting for your opponent to make a decision. After two minutes, the game will be terminated.</p> 
      {{else}}
      {{#unless waiting}}
      <p>Make a choice for round {{round}}. You have two minutes. After that, the game will be terminated.</p>
      {{/unless}}
      {{/if}}

      <p>Time remaining: {{tsRoundRemainingTime}} </p>
      <button type="button" value="1" class="btn btn-success action {{#if choseAction}}disabled{{/if}}">Choice 1</button>
      <button type="button" value="2" class="btn btn-danger action {{#if choseAction}}disabled{{/if}}">Choice 2</button>
      {{/if}}
      {{/if}}
    </div>
    <div class="col-md-3">
      {{> stats}}
    </div>
  </div>
</template>
